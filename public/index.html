<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Registration</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-light">

<div class="container mt-5">
  <div class="card p-4 shadow">
    <h2 class="text-center mb-4">üìù User Registration</h2>
    <form id="registerForm">

      <div class="mb-3">
        <label>Name</label>
        <input type="text" id="name" class="form-control" required>
      </div>

      <div class="mb-3">
        <label>Username</label>
        <input type="text" id="username" class="form-control" required>
      </div>

      <div class="mb-3">
        <label>Email</label>
        <input type="email" id="email" class="form-control" required>
      </div>

      <div class="mb-3">
        <label>Mobile</label>
        <input type="text" id="mobile" class="form-control" maxlength="10" required>
      </div>

      <div class="mb-3">
        <label>City</label>
        <input type="text" id="city" class="form-control" required>
      </div>

      <div class="mb-3">
        <label>State</label>
        <input type="text" id="state" class="form-control" required>
      </div>

      <div class="mb-3">
        <label>Country</label>
        <input type="text" id="country" class="form-control" required>
      </div>

      <div class="mb-3">
        <label>User ID</label>
        <input type="text" id="userId" class="form-control" maxlength="8" required>
      </div>

      <div class="mb-3">
        <label>Password</label>
        <input type="password" id="password" class="form-control" required>
      </div>

      <button type="submit" class="btn btn-success w-100">Register</button>
    </form>

    <div class="text-center mt-3">
      <a href="liveusers.html" class="btn btn-primary">üëâ View Live Registered Users</a>
    </div>
  </div>
</div>

<script>
document.getElementById("registerForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const userData = {
    name: document.getElementById("name").value,
    username: document.getElementById("username").value,
    email: document.getElementById("email").value,
    mobile: document.getElementById("mobile").value,
    city: document.getElementById("city").value,
    state: document.getElementById("state").value,
    country: document.getElementById("country").value,
    userId: document.getElementById("userId").value,
    password: document.getElementById("password").value
  };

  try {
    const res = await fetch("/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(userData)
    });

    if (res.ok) {
      Swal.fire("‚úÖ Success", "Registration Successful!", "success");
      document.getElementById("registerForm").reset();
    } else {
      const msg = await res.text();
      Swal.fire("‚ùå Failed", msg, "error");
    }
  } catch (err) {
    Swal.fire("‚ö†Ô∏è Error", "Something went wrong!", "warning");
  }
});
</script>

</body>
</html>
